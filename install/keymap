#!/bin/bash

build() {

    # subshell to avoid namespace pollution
    (
        . "$BASEDIR/etc/rc.conf"
        if [[ $KEYMAP ]]; then
            if [[ $LOCALE = *[Uu][Tt][Ff]-8 ]]; then
                printf '%s\n' "UTF8=yes" > "$BUILDROOT/keymap.utf8"
                /bin/loadkeys -q -u $KEYMAP -b > "$BUILDROOT/keymap.bin"
            else
                printf '%s\n' "UTF8=no" > "$BUILDROOT/keymap.utf8"
                /bin/loadkeys -q $KEYMAP -b > "$BUILDROOT/keymap.bin"
            fi
        fi
    )

    (( $? == 0 )) && SCRIPT=keymap
}

help() {
    cat<<HELPEOF
This hook loads keymap(s) specified in rc.conf during early userspace.
HELPEOF
}

# vim: set ft=sh ts=4 sw=4 et:
